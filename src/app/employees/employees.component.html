<mat-card class="mt-4 mat-elevation-z15">
  <div class="col-12 w-100 text-center" *ngIf="loadingEmployees">
    <mat-spinner class="ms-auto me-auto"></mat-spinner>
  </div>
  <div class="col-12 p-0" *ngIf="!loadingEmployees">
    <button mat-stroked-button color="primary" class="button-full-width" (click)="navigateTooEmployeePage()">
      <span class="material-icons-round mr-2">person_add</span>
      <span class="label">CREATE NEW</span>
    </button>
  </div>
  <hr class="mt-4">
  <div class="d-flex inline-flex">
    <h1 class="align-self-center">Employees</h1>
    <span class="align-self-center ms-auto me-2">
      {{ employeeActive ? 'Working employees' : 'Old employees'}}
    </span>
    <mat-slide-toggle class="align-self-center" [checked]="employeeActive" (change)="getEmployees()">
    </mat-slide-toggle>
  </div>
  <div *ngIf="employeesDataSource.data && employeesDataSource.data.length === 0 && !loadingEmployees">
    <h1>
      There are no employees on the database for the condition selected.
    </h1>
  </div>
  <div [hidden]="(!loadingEmployees && employeesDataSource.data.length === 0) || loadingEmployees">
    <div class="row mt-4">
      <div class="col-12">
        <mat-form-field class="w-100" appearance="fill">
          <mat-label>Search</mat-label>
          <input type="string" matInput placeholder="Search by name, employee number or start date"  (keyup)="search($event)">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </div>
    </div>
    <table mat-table [dataSource]="employeesDataSource" aria-describedby="employees" class="w-100" matSort>
      <ng-container matColumnDef="firstName">
        <th id="firstName" mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
        <td mat-cell *matCellDef="let employee" class="pointer"
          (click)="navigateTooEmployeePage(employee.id)">{{employee.firstName + ' ' + employee.lastName}} </td>
      </ng-container>
      <ng-container matColumnDef="employeeNumber">
        <th id="employeeNumber" mat-header-cell *matHeaderCellDef mat-sort-header>Employee number</th>
        <td mat-cell *matCellDef="let employee" class="pointer"
          (click)="navigateTooEmployeePage(employee.id)">{{employee.employeeNumber}} </td>
      </ng-container>
      <ng-container matColumnDef="jobTitle">
        <th id="role" mat-header-cell *matHeaderCellDef mat-sort-header>Job title</th>
        <td mat-cell *matCellDef="let employee" class="pointer"
          (click)="navigateTooEmployeePage(employee.id)">{{employee.jobTitle}} </td>
      </ng-container>
      <ng-container matColumnDef="department">
        <th id="market" mat-header-cell *matHeaderCellDef mat-sort-header>Department</th>
        <td mat-cell *matCellDef="let employee" class="pointer"
          (click)="navigateTooEmployeePage(employee.id)">{{employee.department}} </td>
      </ng-container>
      <ng-container matColumnDef="startDate">
        <th id="startDate" mat-header-cell *matHeaderCellDef mat-sort-header>Start date</th>
        <td mat-cell *matCellDef="let employee" class="pointer"
          (click)="navigateTooEmployeePage(employee.id)">{{employee.startDate | date: 'dd/MM/yyyy'}} </td>
      </ng-container>
      <ng-container matColumnDef="endDate">
        <th id="endDate" mat-header-cell *matHeaderCellDef mat-sort-header>End date</th>
        <td mat-cell *matCellDef="let employee" class="pointer"
          (click)="navigateTooEmployeePage(employee.id)">{{employee.endDate ? (employee.endDate | date: 'dd/MM/yyyy') : '-'}} </td>
      </ng-container>
      <ng-container matColumnDef="actions">
        <th id="actions" mat-header-cell *matHeaderCellDef mat-sort-header>Actions</th>
        <td mat-cell *matCellDef="let employee">
          <button mat-stroked-button color="primary" (click)="deactivateEmployee(employee)" *ngIf="!employee.endDate">
            <span class="material-icons-round">person_off</span>
          </button>
          <button mat-stroked-button color="primary" (click)="activateEmployee(employee)" *ngIf="employee.endDate">
            <span class="material-icons-round">person_add_alt</span>
          </button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator #paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
      [disabled]="employeesDataSource.data.length < 6"></mat-paginator>
  </div>
</mat-card>
